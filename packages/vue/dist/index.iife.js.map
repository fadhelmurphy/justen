{"version":3,"file":"index.iife.js","sources":["../index.js"],"sourcesContent":["import { ref, onUnmounted } from 'vue';\n\nfunction createStore(initializer) {\n  const store = createStoreBase(initializer);\n\n  const useStore = (selector = (s) => s) => {\n    const selected = ref(selector(store.getState()));\n\n    const unsub = store.subscribe(() => {\n      selected.value = selector(store.getState());\n    });\n\n    onUnmounted(() => {\n      unsub();\n    });\n\n    return selected;\n  };\n\n  useStore.getState = store.getState;\n  useStore.setState = store.setState;\n  useStore.subscribe = store.subscribe;\n\n  return useStore;\n}\n\nfunction createStoreBase(initializer) {\n  let state = {};\n  const listeners = new Set();\n\n  const getState = () => state;\n\n  const setState = (partial) => {\n    const next = typeof partial === 'function' ? partial(state) : partial;\n    state = { ...state, ...next };\n    listeners.forEach((fn) => fn());\n  };\n\n  state = initializer(setState, getState);\n\n  const subscribe = (fn) => {\n    listeners.add(fn);\n    return () => listeners.delete(fn);\n  };\n\n  return { getState, setState, subscribe };\n}\n\nexport { createStore };\n"],"names":["initializer","store","state","listeners","Set","getState","setState","partial","next","forEach","fn","subscribe","add","delete","createStoreBase","useStore","selector","s","selected","ref","unsub","value","onUnmounted"],"mappings":"oEAEA,SAAqBA,GACnB,MAAMC,EAuBR,SAAyBD,GACvB,IAAIE,EAAQ,CAAA,EACZ,MAAMC,EAAY,IAAIC,IAEhBC,EAAW,IAAMH,EAEjBI,EAAYC,IAChB,MAAMC,EAA0B,mBAAZD,EAAyBA,EAAQL,GAASK,EAC9DL,EAAQ,IAAKA,KAAUM,GACvBL,EAAUM,QAASC,GAAOA,MAG5BR,EAAQF,EAAYM,EAAUD,GAO9B,MAAO,CAAEA,WAAUC,WAAUK,UALVD,IACjBP,EAAUS,IAAIF,GACP,IAAMP,EAAUU,OAAOH,IAIlC,CA3CgBI,CAAgBd,GAExBe,EAAW,CAACC,EAAYC,GAAMA,KAClC,MAAMC,EAAWC,EAAAA,IAAIH,EAASf,EAAMI,aAE9Be,EAAQnB,EAAMU,UAAU,KAC5BO,EAASG,MAAQL,EAASf,EAAMI,cAOlC,OAJAiB,EAAAA,YAAY,KACVF,MAGKF,GAOT,OAJAH,EAASV,SAAWJ,EAAMI,SAC1BU,EAAST,SAAWL,EAAMK,SAC1BS,EAASJ,UAAYV,EAAMU,UAEpBI,CACT"}