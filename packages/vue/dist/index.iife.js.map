{"version":3,"file":"index.iife.js","sources":["../justen.js"],"sourcesContent":["import { ref, onUnmounted } from 'vue';\r\n\r\nfunction createStore(initializer) {\r\n  const store = createStoreBase(initializer);\r\n\r\n  const useStore = (selector = (s) => s) => {\r\n    const selected = ref(selector(store.getState()));\r\n\r\n    const unsub = store.subscribe(() => {\r\n      selected.value = selector(store.getState());\r\n    });\r\n\r\n    onUnmounted(() => {\r\n      unsub();\r\n    });\r\n\r\n    return selected;\r\n  };\r\n\r\n  useStore.getState = store.getState;\r\n  useStore.setState = store.setState;\r\n  useStore.subscribe = store.subscribe;\r\n\r\n  return useStore;\r\n}\r\n\r\nfunction createStoreBase(initializer) {\r\n  let state = {};\r\n  const listeners = new Set();\r\n\r\n  const getState = () => state;\r\n\r\n  const setState = (partial) => {\r\n    const next = typeof partial === 'function' ? partial(state) : partial;\r\n    state = { ...state, ...next };\r\n    listeners.forEach((fn) => fn());\r\n  };\r\n\r\n  state = initializer(setState, getState);\r\n\r\n  const subscribe = (fn) => {\r\n    listeners.add(fn);\r\n    return () => listeners.delete(fn);\r\n  };\r\n\r\n  return { getState, setState, subscribe };\r\n}\r\n\r\nexport { createStore };\r\n"],"names":["initializer","store","state","listeners","Set","getState","setState","partial","next","forEach","fn","subscribe","add","delete","createStoreBase","useStore","selector","s","selected","ref","unsub","value","onUnmounted"],"mappings":"oEAEA,SAAqBA,GACnB,MAAMC,EAuBR,SAAyBD,GACvB,IAAIE,EAAQ,CAAA,EACZ,MAAMC,EAAY,IAAIC,IAEhBC,EAAW,IAAMH,EAEjBI,EAAYC,IAChB,MAAMC,EAA0B,mBAAZD,EAAyBA,EAAQL,GAASK,EAC9DL,EAAQ,IAAKA,KAAUM,GACvBL,EAAUM,QAASC,GAAOA,MAG5BR,EAAQF,EAAYM,EAAUD,GAO9B,MAAO,CAAEA,WAAUC,WAAUK,UALVD,IACjBP,EAAUS,IAAIF,GACP,IAAMP,EAAUU,OAAOH,IAIlC,CA3CgBI,CAAgBd,GAExBe,EAAW,CAACC,EAAYC,GAAMA,KAClC,MAAMC,EAAWC,EAAAA,IAAIH,EAASf,EAAMI,aAE9Be,EAAQnB,EAAMU,UAAU,KAC5BO,EAASG,MAAQL,EAASf,EAAMI,cAOlC,OAJAiB,EAAAA,YAAY,KACVF,MAGKF,GAOT,OAJAH,EAASV,SAAWJ,EAAMI,SAC1BU,EAAST,SAAWL,EAAMK,SAC1BS,EAASJ,UAAYV,EAAMU,UAEpBI,CACT"}