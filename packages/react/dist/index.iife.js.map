{"version":3,"file":"index.iife.js","sources":["../index.js"],"sourcesContent":["import { useSyncExternalStore } from 'react';\n\nexport function createStore(createState) {\n  let state;\n  const listeners = new Set();\n\n  const setState = (partial, replace) => {\n    const nextState = typeof partial === 'function' ? partial(state) : partial;\n\n    const changed = replace\n      ? nextState !== state\n      : Object.keys(nextState).some((key) => state[key] !== nextState[key]);\n\n    if (!changed) return;\n\n    state = replace ? nextState : { ...state, ...nextState };\n    listeners.forEach((listener) => listener());\n  };\n\n  const getState = () => state;\n\n  const subscribe = (listener) => {\n    listeners.add(listener);\n    return () => listeners.delete(listener);\n  };\n\n  state = createState(setState, getState);\n\n  const useStore = (selector = (s) => s) => {\n    return useSyncExternalStore(\n      subscribe,\n      () => selector(getState()),\n      () => selector(getState())\n    );\n  };\n\n  useStore.getState = getState;\n  useStore.setState = setState;\n  useStore.subscribe = subscribe;\n\n  return useStore;\n}\n"],"names":["createState","state","listeners","Set","setState","partial","replace","nextState","Object","keys","some","key","forEach","listener","getState","subscribe","add","delete","useStore","selector","s","useSyncExternalStore"],"mappings":"sEAEO,SAAqBA,GAC1B,IAAIC,EACJ,MAAMC,EAAY,IAAIC,IAEhBC,EAAW,CAACC,EAASC,KACzB,MAAMC,EAA+B,mBAAZF,EAAyBA,EAAQJ,GAASI,GAEnDC,EACZC,IAAcN,EACdO,OAAOC,KAAKF,GAAWG,KAAMC,GAAQV,EAAMU,KAASJ,EAAUI,OAIlEV,EAAQK,EAAUC,EAAY,IAAKN,KAAUM,GAC7CL,EAAUU,QAASC,GAAaA,OAG5BC,EAAW,IAAMb,EAEjBc,EAAaF,IACjBX,EAAUc,IAAIH,GACP,IAAMX,EAAUe,OAAOJ,IAGhCZ,EAAQD,EAAYI,EAAUU,GAE9B,MAAMI,EAAW,CAACC,EAAYC,GAAMA,IAC3BC,EAAAA,qBACLN,EACA,IAAMI,EAASL,KACf,IAAMK,EAASL,MAQnB,OAJAI,EAASJ,SAAWA,EACpBI,EAASd,SAAWA,EACpBc,EAASH,UAAYA,EAEdG,CACT"}